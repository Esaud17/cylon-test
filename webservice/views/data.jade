extends layout

block scripts
    link(href="/c3/c3.css" rel="stylesheet" type="text/css")

    script(src="/c3/c3.js")
    script(src="/d3/d3.js")

    script(src="/socket.io/socket.io.js")
    script(type='text/javascript').
        var handler= function(){
            var socket = io('http://localhost:3000');

            var hand = {left:0, right:0 };
            
            var chart = c3.generate({
                bindto: '#chart',
                data: {
                columns: [ 
                           ['left', hand.left ],
                           ['right',hand.right ] 
                         ],
                        type: 'bar'
                },
                bar:{
                    width:{ ratio:1}
                },
                tooltip:{
                    format:{
                        title:function(x){ return 'Datos' }
                    }
                },
                axis:{
                    y: {
                        label:'numero de deteciones'
                    },
                    x: {
                        show:true,
                         label:'manos usadas' 
                    }
                }

            });

            socket.on('ready', function (data) {
                //console.log(data);
                socket.emit('cytlon', { cmd:'start' });
            });

            socket.on('hand', function (data) {

                if(data.data.hand=='left'){
                    hand.left++;
                }else{
                    hand.right++;
                }
                //console.log(hand);
                
                chart.load({ 
                    columns: [ 
                                ['left', hand.left ],
                                ['right',hand.right ] 
                             ]
                });
                
            });  
        };

        $(document).ready(handler);

block content
  
  section(class="container")
    section(class="row")
        div(class="col s12")
            h1 datos
            div(class="divider")
            div(id="chart")